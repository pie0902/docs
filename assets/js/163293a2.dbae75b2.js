"use strict";(globalThis.webpackChunkmy_portfolio=globalThis.webpackChunkmy_portfolio||[]).push([[65236],{13275:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>s,metadata:()=>d,toc:()=>o});var d=r(75380),t=r(74848),i=r(28453);const s={title:"Spring Data JPA\ub97c \ud65c\uc6a9\ud55c \ub9ac\ubdf0 \uc0dd\uc131 \ub85c\uc9c1 \uad6c\ud604",date:new Date("2024-10-16T00:00:00.000Z"),authors:["thunder"],tags:["dev","java-springboot","java","jpa","spring"]},l="Spring Data JPA\ub97c \ud65c\uc6a9\ud55c \ub9ac\ubdf0 \uc0dd\uc131 \ub85c\uc9c1 \uad6c\ud604",c={authorsImageUrls:[void 0]},o=[{value:"\ub9ac\ubdf0 \uc0dd\uc131 \uc870\uac74",id:"\ub9ac\ubdf0-\uc0dd\uc131-\uc870\uac74",level:2},{value:"\ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc8fc\ubb38\ud55c \ud69f\uc218 \ub9cc\ud07c \ub9ac\ubdf0 \uc791\uc131 \uc81c\ud55c",id:"\ud074\ub77c\uc774\uc5b8\ud2b8\uac00-\uc8fc\ubb38\ud55c-\ud69f\uc218-\ub9cc\ud07c-\ub9ac\ubdf0-\uc791\uc131-\uc81c\ud55c",level:3},{value:"\uad6c\ud604 \ubc29\ubc95",id:"\uad6c\ud604-\ubc29\ubc95",level:3},{value:"review Table",id:"review-table",level:3},{value:"order Table",id:"order-table",level:3},{value:"order_detail Table",id:"order_detail-table",level:3},{value:"Review entity",id:"review-entity",level:3},{value:"createReview \uba54\uc11c\ub4dc",id:"createreview-\uba54\uc11c\ub4dc",level:3}];function h(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"\ub9ac\ubdf0-\uc0dd\uc131-\uc870\uac74",children:"\ub9ac\ubdf0 \uc0dd\uc131 \uc870\uac74"}),"\n",(0,t.jsx)(n.h3,{id:"\ud074\ub77c\uc774\uc5b8\ud2b8\uac00-\uc8fc\ubb38\ud55c-\ud69f\uc218-\ub9cc\ud07c-\ub9ac\ubdf0-\uc791\uc131-\uc81c\ud55c",children:"\ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc8fc\ubb38\ud55c \ud69f\uc218 \ub9cc\ud07c \ub9ac\ubdf0 \uc791\uc131 \uc81c\ud55c"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\uc0ac\uc6a9\uc790\ub294 \ud2b9\uc815 \uc0c1\ud488\uc744 \uc8fc\ubb38\ud55c \ud69f\uc218\uc640 \ub3d9\uc77c\ud55c \uc218\uc758 \ub9ac\ubdf0\ub9cc \uc791\uc131\ud560 \uc218 \uc788\ub2e4."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\uad6c\ud604-\ubc29\ubc95",children:"\uad6c\ud604 \ubc29\ubc95"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\uc8fc\ubb38 \ud69f\uc218 \uc870\ud68c"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\uc0ac\uc6a9\uc790 ID\uc640 \uc0c1\ud488 ID\ub97c \uae30\uc900\uc73c\ub85c \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc758 \ud2b9\uc815 \uc0c1\ud488\uc5d0 \ub300\ud55c \uc8fc\ubb38 \ud69f\uc218\ub97c \uc870\ud68c\ud55c\ub2e4.","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"long orderCount = orderDetailRepository.countByUserIdAndProductId(userId, productId);\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"OrderDetailRepository"}),"\uc5d0\uc11c \uc0ac\uc6a9\uc790 ID\uc640 \uc0c1\ud488 ID\ub85c \uc8fc\ubb38 \ud69f\uc218\ub97c \uc870\ud68c\ud558\ub294 \uba54\uc11c\ub4dc\ub97c \uc815\uc758\ud55c\ub2e4.","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Query("SELECT COUNT(od) FROM OrderDetail od WHERE od.order.user.id = :userId AND od.productId = :productId")\nlong countByUserIdAndProductId(@Param("userId") Long userId, @Param("productId") Long productId);\n'})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["OrderDetail \uc5d4\ud2f0\ud2f0\uc5d0\uc11c order \ud544\ub4dc\ub97c \ud1b5\ud574 \uc5f0\uad00\ub41c Order \uc5d4\ud2f0\ud2f0\uc758 user.id\uac00 \uc804\ub2ec\ubc1b\uc740 userId\uc640 \uc77c\uce58\ud558\ub294 \ub808\ucf54\ub4dc\ub97c \uc870\ud68c\ud55c\ub2e4.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"od.order.user.id = :userId: OrderDetail \uc5d4\ud2f0\ud2f0\uc758 order \ud544\ub4dc\ub97c \ud1b5\ud574 Order \uc5d4\ud2f0\ud2f0\uc758 user \ud544\ub4dc\uc5d0 \uc811\uadfc\ud558\uc5ec id\uac00 userId\uc640 \uc77c\uce58\ud558\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["OrderDetail \uc5d4\ud2f0\ud2f0\uc758 productId \ud544\ub4dc\uac00 \uc804\ub2ec\ubc1b\uc740 productId\uc640 \uc77c\uce58\ud558\ub294 \ub808\ucf54\ub4dc\ub97c \uc870\ud68c\ud55c\ub2e4.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"od.productId = :productId: OrderDetail \uc5d4\ud2f0\ud2f0\uc758 productId \ud544\ub4dc\uac00 productId\uc640 \uc77c\uce58\ud558\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\uc704\uc758 \ub450 \uc870\uac74\uc744 \ubaa8\ub450 \ub9cc\uc871\ud558\ub294 OrderDetail \ub808\ucf54\ub4dc\uc758 \uac1c\uc218\ub97c \uc870\ud68c\ud55c\ub2e4.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"SELECT COUNT(od): \uc870\ud68c\ub41c OrderDetail \ub808\ucf54\ub4dc\uc758 \uac1c\uc218\ub97c \ubc18\ud658\ud55c\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\ub9ac\ubdf0 \uac1c\uc218 \uc870\ud68c"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\uc0ac\uc6a9\uc790 ID\uc640 \uc0c1\ud488 ID\ub97c \uae30\uc900\uc73c\ub85c \ud574\ub2f9 \uc0ac\uc6a9\uc790\uac00 \ud2b9\uc815 \uc0c1\ud488\uc5d0 \ub300\ud574 \uc791\uc131\ud55c \ub9ac\ubdf0 \uac1c\uc218\ub97c \uc870\ud68c\ud55c\ub2e4.","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"long reviewCount = reviewRepository.countByUserIdAndProductId(userId, productId);\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\ub9ac\ubdf0 \uc791\uc131 \uac00\ub2a5 \uc5ec\ubd80 \ud310\ub2e8"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\uc8fc\ubb38 \ud69f\uc218\uc640 \ub9ac\ubdf0 \uac1c\uc218\ub97c \ube44\uad50\ud558\uc5ec \ub9ac\ubdf0 \uc791\uc131 \uac00\ub2a5 \uc5ec\ubd80\ub97c \ud310\ub2e8\ud55c\ub2e4."}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"canUserReviewProduct"})," \uba54\uc11c\ub4dc\ub97c \uc815\uc758\ud558\uc5ec \uc8fc\ubb38 \ud69f\uc218\uc640 \ub9ac\ubdf0 \uac1c\uc218\ub97c \ube44\uad50\ud55c\ub2e4.","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"private boolean canUserReviewProduct(Long userId, Long productId) {\n    long orderCount = orderDetailRepository.countByUserIdAndProductId(userId, productId);\n    long reviewCount = reviewRepository.countByUserIdAndProductId(userId, productId);\n    return orderCount > reviewCount;\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\uc8fc\ubb38 \ud69f\uc218(",(0,t.jsx)(n.code,{children:"orderCount"}),")\uac00 \ub9ac\ubdf0 \uac1c\uc218(",(0,t.jsx)(n.code,{children:"reviewCount"}),")\ubcf4\ub2e4 \ud06c\uba74 ",(0,t.jsx)(n.code,{children:"true"}),"\ub97c \ubc18\ud658\ud558\uc5ec \ub9ac\ubdf0 \uc791\uc131\uc774 \uac00\ub2a5\ud568\uc744 \ub098\ud0c0\ub0b8\ub2e4."]}),"\n",(0,t.jsxs)(n.li,{children:["\uc8fc\ubb38 \ud69f\uc218\uac00 \ub9ac\ubdf0 \uac1c\uc218\ubcf4\ub2e4 \uc791\uac70\ub098 \uac19\uc73c\uba74 ",(0,t.jsx)(n.code,{children:"false"}),"\ub97c \ubc18\ud658\ud558\uc5ec \ub9ac\ubdf0 \uc791\uc131\uc774 \ubd88\uac00\ub2a5\ud568\uc744 \ub098\ud0c0\ub0b8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"review-table",children:"review Table"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\uceec\ub7fc\uba85"}),(0,t.jsx)(n.th,{children:"\ub370\uc774\ud130 \ud0c0\uc785"}),(0,t.jsx)(n.th,{children:"\uc81c\uc57d \uc870\uac74"}),(0,t.jsx)(n.th,{children:"\uc124\uba85"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"PRIMARY KEY, AUTO_INCREMENT"}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"content"}),(0,t.jsx)(n.td,{children:"VARCHAR"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 \ub0b4\uc6a9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"photo"}),(0,t.jsx)(n.td,{children:"VARCHAR"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 \uc0ac\uc9c4"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"score"}),(0,t.jsx)(n.td,{children:"INT"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 \uc810\uc218"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"user_id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"FOREIGN KEY (User.id), NOT NULL"}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 \uc791\uc131\uc790 ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"prodcut_id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"FOREIGN KEY (Product.id), NOT NULL"}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 \ub300\uc0c1 \uc0c1\ud488 ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"created_at"}),(0,t.jsx)(n.td,{children:"TIMESTAMP"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 \uc0dd\uc131 \uc2dc\uac04 (TimeStamped)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"modified_at"}),(0,t.jsx)(n.td,{children:"TIMESTAMP"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{children:"\ub9ac\ubdf0 \uc218\uc815 \uc2dc\uac04 (TimeStamped)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"order-table",children:"order Table"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\uceec\ub7fc\uba85"}),(0,t.jsx)(n.th,{children:"\ub370\uc774\ud130 \ud0c0\uc785"}),(0,t.jsx)(n.th,{children:"\uc81c\uc57d \uc870\uac74"}),(0,t.jsx)(n.th,{children:"\uc124\uba85"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"PRIMARY KEY, AUTO_INCREMENT"}),(0,t.jsx)(n.td,{children:"\uc8fc\ubb38 ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"state"}),(0,t.jsx)(n.td,{children:"VARCHAR"}),(0,t.jsx)(n.td,{children:"NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc8fc\ubb38 \uc0c1\ud0dc (OrderState \uc5f4\uac70\ud615)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"user_id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"FOREIGN KEY (User.id), NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc8fc\ubb38 \uc0ac\uc6a9\uc790 ID (\uc678\ub798 \ud0a4)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"address_id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"FOREIGN KEY (Address.id), NOT NULL"}),(0,t.jsx)(n.td,{children:"\ubc30\uc1a1 \uc8fc\uc18c ID (\uc678\ub798 \ud0a4)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"created_at"}),(0,t.jsx)(n.td,{children:"TIMESTAMP"}),(0,t.jsx)(n.td,{children:"NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc8fc\ubb38 \uc0dd\uc131 \uc2dc\uac04 (TimeStamped)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"modified_at"}),(0,t.jsx)(n.td,{children:"TIMESTAMP"}),(0,t.jsx)(n.td,{children:"NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc8fc\ubb38 \uc218\uc815 \uc2dc\uac04 (TimeStamped)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"order_detail-table",children:"order_detail Table"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\uceec\ub7fc\uba85"}),(0,t.jsx)(n.th,{children:"\ub370\uc774\ud130 \ud0c0\uc785"}),(0,t.jsx)(n.th,{children:"\uc81c\uc57d \uc870\uac74"}),(0,t.jsx)(n.th,{children:"\uc124\uba85"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"PRIMARY KEY, AUTO_INCREMENT"}),(0,t.jsx)(n.td,{children:"\uc8fc\ubb38 \uc0c1\uc138 ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"product_id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc0c1\ud488 ID"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"price"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc0c1\ud488 \uac00\uaca9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"quantity"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc0c1\ud488 \uc218\ub7c9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"order_id"}),(0,t.jsx)(n.td,{children:"BIGINT"}),(0,t.jsx)(n.td,{children:"FOREIGN KEY (Order.id), NOT NULL"}),(0,t.jsx)(n.td,{children:"\uc8fc\ubb38 ID (\uc678\ub798 \ud0a4)"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"review-entity",children:"Review entity"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Entity\n@Table(name="review")\n@Getter\n@NoArgsConstructor\npublic class Review extends TimeStamped {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column\n    private String content;\n    @Column\n    private String photo;\n    @Column\n    private int score;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = "user_id", nullable = false, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))\n    private User user;\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = "prodcut_id", nullable = false, foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT))\n    private Product product;\n\n\n    public Review(\n        ReviewRequest reviewRequest,\n        Product product,\n        User user\n    ){\n        this.content = reviewRequest.getContent();\n        this.photo = reviewRequest.getPhoto();\n        this.score = reviewRequest.getScore();\n        this.product = product;\n        this.user = user;\n    }\n    public void updateReview(\n        ReviewRequest reviewRequest\n    ) {\n        this.content = reviewRequest.getContent();\n        this.photo = reviewRequest.getPhoto();\n        this.score = reviewRequest.getScore();\n    }\n}\n\n'})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"foreignKey = @ForeignKey(ConstraintMode.NO_CONSTRAINT)\ub97c \uc791\uc131\ud574\uc11c \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc218\uc900\uc5d0\uc11c\uc758 \uc678\ub798 \ud0a4 \uc81c\uc57d \uc870\uac74 \uc0dd\uc131\uc744 \ub9c9\ub294\ub2e4."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"createreview-\uba54\uc11c\ub4dc",children:"createReview \uba54\uc11c\ub4dc"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'    //\ub9ac\ubdf0 \uc0dd\uc131\n    public void createReview(\n        Long productId,\n        ReviewRequest reviewRequest,\n        Long userId\n    ) {\n        // \uc0c1\ud488 \uc870\ud68c \ubc0f \uc608\uc678 \ucc98\ub9ac\n        Product product = productRepository.findById(productId)\n            .orElseThrow(() -> new ResponseStatusException(HttpStatus.NOT_FOUND, "\uc0c1\ud488 \uc815\ubcf4\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."));\n        // \uc0c1\ud488 \uc0c1\ud0dc \uac80\uc99d: \uc0ad\uc81c\ub41c \uc0c1\ud488\uc778 \uacbd\uc6b0 \uc608\uc678 \ubc1c\uc0dd\n        if (!product.isState()) {\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, "\uc0ad\uc81c\ub41c \uc0c1\ud488\uc785\ub2c8\ub2e4.");\n        }\n        // \uc0ac\uc6a9\uc790 \uc870\ud68c \ubc0f \uc608\uc678 \ucc98\ub9ac\n        User user = findUserByIdOrThrow(userId);\n        // \ub9ac\ubdf0 \uc791\uc131 \uad8c\ud55c \uac80\uc99d: \uc8fc\ubb38 \ub0b4\uc5ed \ud655\uc778\n        // \uc704\uc5d0 \uc791\uc131\ud55c \ucf54\ub4dc\ube14\ub7ed canUserReviewProduct \uba54\uc11c\ub4dc\n        if (!canUserReviewProduct(userId, productId)) {\n            throw new IllegalArgumentException("\ub9ac\ubdf0\ub97c \uc791\uc131\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc8fc\ubb38 \ub0b4\uc5ed\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.");\n        }\n        // \ub9ac\ubdf0 \uc810\uc218 \uc720\ud6a8\uc131 \uac80\uc0ac: 1\uc810\ubd80\ud130 5\uc810\uae4c\uc9c0 \ud5c8\uc6a9 \n        if(reviewRequest.getScore()<1||reviewRequest.getScore()>5){\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST, "1\uc810\ubd80\ud130 5\uc810\uae4c\uc9c0 \uc785\ub825\ud574\uc8fc\uc138\uc694");\n        }\n        // \ub9ac\ubdf0 \uc0dd\uc131\n        Review review = new Review(reviewRequest, product, user);\n        // \ub9ac\ubdf0\ub97c \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\n        reviewRepository.save(review);\n    }\n'})})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var d=r(96540);const t={},i=d.createContext(t);function s(e){const n=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),d.createElement(i.Provider,{value:n},e.children)}},75380:e=>{e.exports=JSON.parse('{"permalink":"/docs/blog/dev/spring/spring-data-jpa\ub97c-\ud65c\uc6a9\ud55c-\ub9ac\ubdf0-\uc0dd\uc131-\ub85c\uc9c1-\uad6c\ud604","source":"@site/blog/dev/spring/spring-data-jpa\ub97c-\ud65c\uc6a9\ud55c-\ub9ac\ubdf0-\uc0dd\uc131-\ub85c\uc9c1-\uad6c\ud604.md","title":"Spring Data JPA\ub97c \ud65c\uc6a9\ud55c \ub9ac\ubdf0 \uc0dd\uc131 \ub85c\uc9c1 \uad6c\ud604","description":"\ub9ac\ubdf0 \uc0dd\uc131 \uc870\uac74","date":"2024-10-16T00:00:00.000Z","tags":[{"inline":false,"label":"Dev","permalink":"/docs/blog/tags/dev","description":"\uac1c\ubc1c \uc2e4\uc804 \ub178\ud2b8"},{"inline":false,"label":"Java/SpringBoot","permalink":"/docs/blog/tags/dev/java-springboot","description":"Java/Spring Boot \uad00\ub828 \uae00"},{"inline":false,"label":"Java","permalink":"/docs/blog/tags/dev/java","description":"Java \uad00\ub828 \uae00"},{"inline":false,"label":"JPA","permalink":"/docs/blog/tags/dev/spring/jpa","description":"JPA/Hibernate"},{"inline":false,"label":"Spring","permalink":"/docs/blog/tags/dev/spring","description":"Spring/Spring Boot"}],"readingTime":3.25,"hasTruncateMarker":false,"authors":[{"name":"thunder","title":"\uac1c\ubc1c\uc790","url":"https://github.com/pie0902","page":{"permalink":"/docs/blog/authors/thunder"},"socials":{"github":"https://github.com/pie0902"},"key":"thunder"}],"frontMatter":{"title":"Spring Data JPA\ub97c \ud65c\uc6a9\ud55c \ub9ac\ubdf0 \uc0dd\uc131 \ub85c\uc9c1 \uad6c\ud604","date":"2024-10-16T00:00:00.000Z","authors":["thunder"],"tags":["dev","java-springboot","java","jpa","spring"]},"unlisted":false,"prevItem":{"title":"HTTPS \u1107\u1169\u11a8\u1109\u1161\u1107\u1169\u11ab","permalink":"/docs/blog/dev/spring/https-\ubcf5\uc0ac\ubcf8"},"nextItem":{"title":"Spring MVC \uac1c\ub150 \uc815\ub9ac","permalink":"/docs/blog/dev/spring/spring-mvc-\uac1c\ub150-\uc815\ub9ac"}}')}}]);