"use strict";(globalThis.webpackChunkmy_portfolio=globalThis.webpackChunkmy_portfolio||[]).push([[2865],{4759:e=>{e.exports=JSON.parse('{"permalink":"/docs/blog/project/creww/10-creww-\ucffc\ub9ac\uac1c\uc120-1","source":"@site/blog/project/creww/10-creww-\ucffc\ub9ac\uac1c\uc120-1.md","title":"10. creww \ucffc\ub9ac\uac1c\uc120(1)","description":"\uc2dc\uc791","date":"2024-06-28T00:00:00.000Z","tags":[{"inline":false,"label":"Project","permalink":"/docs/blog/tags/project","description":"\ud504\ub85c\uc81d\ud2b8 \ud68c\uace0/\uc815\ub9ac"},{"inline":false,"label":"Creww","permalink":"/docs/blog/tags/project/creww","description":"Creww \ud504\ub85c\uc81d\ud2b8 \uae30\ub85d"},{"inline":false,"label":"Java","permalink":"/docs/blog/tags/dev/java","description":"Java \uad00\ub828 \uae00"},{"inline":false,"label":"JPA","permalink":"/docs/blog/tags/dev/spring/jpa","description":"JPA/Hibernate"},{"inline":false,"label":"Testing","permalink":"/docs/blog/tags/dev/testing","description":"\ud14c\uc2a4\ud2b8/\ud14c\uc2a4\ud2b8\ucf54\ub4dc"}],"readingTime":4.03,"hasTruncateMarker":false,"authors":[{"name":"thunder","title":"\uac1c\ubc1c\uc790","url":"https://github.com/pie0902","page":{"permalink":"/docs/blog/authors/thunder"},"socials":{"github":"https://github.com/pie0902"},"key":"thunder"}],"frontMatter":{"title":"10. creww \ucffc\ub9ac\uac1c\uc120(1)","date":"2024-06-28T00:00:00.000Z","authors":["thunder"],"tags":["project","creww","java","jpa","testing"]},"unlisted":false,"prevItem":{"title":"11. creww Architecture Diagram","permalink":"/docs/blog/project/creww/11-creww-architecture-diagram"},"nextItem":{"title":"15.Java HashMap \ub2e4\uc2dc \ubcf5\uc2b5","permalink":"/docs/blog/dev/java/15-java-hashmap-\ub2e4\uc2dc-\ubcf5\uc2b5"}}')},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var t=s(96540);const r={},a=t.createContext(r);function i(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(a.Provider,{value:n},e.children)}},71566:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>l});var t=s(4759),r=s(74848),a=s(28453);const i={title:"10. creww \ucffc\ub9ac\uac1c\uc120(1)",date:new Date("2024-06-28T00:00:00.000Z"),authors:["thunder"],tags:["project","creww","java","jpa","testing"]},d="creww project \ucffc\ub9ac\uac1c\uc120",o={authorsImageUrls:[void 0]},l=[{value:"\uc2dc\uc791",id:"\uc2dc\uc791",level:2},{value:"\ubb38\uc81c\uc810",id:"\ubb38\uc81c\uc810",level:2},{value:"\ucffc\ub9ac \uac1c\uc120 \uc804 \uc11c\ube44\uc2a4 \ub85c\uc9c1",id:"\ucffc\ub9ac-\uac1c\uc120-\uc804-\uc11c\ube44\uc2a4-\ub85c\uc9c1",level:3},{value:"\ucffc\ub9ac\ubb38",id:"\ucffc\ub9ac\ubb38",level:3},{value:"Postman\uc73c\ub85c \uc694\uccad\uc2dc \uacb0\uacfc",id:"postman\uc73c\ub85c-\uc694\uccad\uc2dc-\uacb0\uacfc",level:3},{value:"\ud574\uacb0\ubc95",id:"\ud574\uacb0\ubc95",level:2},{value:"\uac1c\uc120 \uc804\uacfc \ud6c4 \ucc28\uc774\uc810",id:"\uac1c\uc120-\uc804\uacfc-\ud6c4-\ucc28\uc774\uc810",level:3},{value:"\uac1c\uc120\ub41c \ucffc\ub9ac\ubb38",id:"\uac1c\uc120\ub41c-\ucffc\ub9ac\ubb38",level:3}];function c(e){const n={blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\uc2dc\uc791",children:"\uc2dc\uc791"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\ub9e8 \ucc98\uc74c \ucf54\ub4dc\ub97c \uc791\uc131\ud558\uba74\uc11c N+1 \ubb38\uc81c\ub4e4\uc744 \uc0dd\uac01 \uc548\ud558\uace0 \ucf54\ub4dc\ub97c \uc791\uc131\ud588\ub2e4.",(0,r.jsx)(n.br,{}),"\n","\uadf8\ub798\uc11c \ub3c4\uba54\uc778 \uc21c\uc11c\ub300\ub85c \ucffc\ub9ac\ub97c \uac1c\uc120\ud574\uc57c\ud560\uc9c0..\uc5b4\ucc0c\ud558\uc9c0?",(0,r.jsx)(n.br,{}),"\n","\uc0dd\uac01\ud558\ub2e4\uac00 \uc77c\ub2e8 Postman\uc744 \uc2e4\ud589\uc2dc\ud0a8 \ub4a4\uc5d0 id\uac00 1\uc778 \ubcf4\ub4dc\uc5d0 \uc804\uccb4 \uac8c\uc2dc\uae00 \uc694\uccad\uc744 \ubcf4\ub0c8\ub2e4.",(0,r.jsx)(n.br,{}),"\n","getPosts \ub77c\ub294 \uc11c\ube44\uc2a4 \uba54\uc11c\ub4dc\ub97c \uba3c\uc800 \ud574\uacb0\ud558\uae30\ub85c.."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ubb38\uc81c\uc810",children:"\ubb38\uc81c\uc810"}),"\n",(0,r.jsx)(n.h3,{id:"\ucffc\ub9ac-\uac1c\uc120-\uc804-\uc11c\ube44\uc2a4-\ub85c\uc9c1",children:"\ucffc\ub9ac \uac1c\uc120 \uc804 \uc11c\ube44\uc2a4 \ub85c\uc9c1"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'public Page<PostResponse> getPosts(Long boardId, int page, int size) {\n    Pageable pageable = PageRequest.of(page, size);\n    Page<Post> posts = postRepository.findByBoardId(boardId, pageable);\n    return posts.map(post -> {\n        String username = userRepository.findById(post.getUserId())\n            .map(User::getUsername)\n            .orElse("\uc720\uc800 \uc5c6\uc74c");\n        return new PostResponse(post.getId(), post.getTitle(), post.getContent(), post.getUserId(), username, post.getCreatedAt(),post.getViews());\n    });\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\ucffc\ub9ac\ubb38",children:"\ucffc\ub9ac\ubb38"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Hibernate: \n    /* select\n        generatedAlias0 \n    from\n        Post as generatedAlias0 \n    where\n        generatedAlias0.boardId=:param0 */ select\n            post0_.id as id1_3_,\n            post0_.created_at as created_2_3_,\n            post0_.updated_at as updated_3_3_,\n            post0_.board_id as board_id4_3_,\n            post0_.content as content5_3_,\n            post0_.title as title6_3_,\n            post0_.user_id as user_id7_3_,\n            post0_.views as views8_3_ \n        from\n            post post0_ \n        where\n            post0_.board_id=? limit ?\nHibernate: \n    select\n        user0_.id as id1_4_0_,\n        user0_.email as email2_4_0_,\n        user0_.password as password3_4_0_,\n        user0_.username as username4_4_0_ \n    from\n        user user0_ \n    where\n        user0_.id=?\nHibernate: \n    select\n        user0_.id as id1_4_0_,\n        user0_.email as email2_4_0_,\n        user0_.password as password3_4_0_,\n        user0_.username as username4_4_0_ \n    from\n        user user0_ \n    where\n        user0_.id=?\nHibernate: \n    /* select\n        generatedAlias0 \n    from\n        Post as generatedAlias0 \n    where\n        generatedAlias0.boardId=:param0 */ select\n            post0_.id as id1_3_,\n            post0_.created_at as created_2_3_,\n            post0_.updated_at as updated_3_3_,\n            post0_.board_id as board_id4_3_,\n            post0_.content as content5_3_,\n            post0_.title as title6_3_,\n            post0_.user_id as user_id7_3_,\n            post0_.views as views8_3_ \n        from\n            post post0_ \n        where\n            post0_.board_id=? limit ?\nHibernate: \n    select\n        user0_.id as id1_4_0_,\n        user0_.email as email2_4_0_,\n        user0_.password as password3_4_0_,\n        user0_.username as username4_4_0_ \n    from\n        user user0_ \n    where\n        user0_.id=?\nHibernate: \n    select\n        user0_.id as id1_4_0_,\n        user0_.email as email2_4_0_,\n        user0_.password as password3_4_0_,\n        user0_.username as username4_4_0_ \n    from\n        user user0_ \n    where\n        user0_.id=?\n"})}),"\n",(0,r.jsx)(n.h3,{id:"postman\uc73c\ub85c-\uc694\uccad\uc2dc-\uacb0\uacfc",children:"Postman\uc73c\ub85c \uc694\uccad\uc2dc \uacb0\uacfc"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "content": [\n    {\n      "id": 1,\n      "title": "test3",\n      "content": "content3",\n      "userId": 1,\n      "username": "teste",\n      "createdAt": "2024-05-22T14:32:31.989315",\n      "views": 82\n    },\n    {\n      "id": 2,\n      "title": "test1",\n      "content": "content1",\n      "userId": 1,\n      "username": "teste",\n      "createdAt": "2024-05-22T14:32:38.370372",\n      "views": 8\n    },\n    {\n      "id": 3,\n      "title": "test",\n      "content": "content",\n      "userId": 1,\n      "username": "teste",\n      "createdAt": "2024-05-22T14:32:46.729826",\n      "views": 2\n    },\n    {\n      "id": 4,\n      "title": "aa",\n      "content": "aaa",\n      "userId": 1,\n      "username": "teste",\n      "createdAt": "2024-05-26T13:58:37.68011",\n      "views": 1\n    },\n    {\n      "id": 7,\n      "title": "hi(update)",\n      "content": "test comment update",\n      "userId": 1,\n      "username": "teste",\n      "createdAt": "2024-06-05T15:18:53.632",\n      "views": 0\n    },\n    {\n      "id": 8,\n      "title": "\uc54c\ub9bc",\n      "content": "\uc54c\ub9bc",\n      "userId": 1,\n      "username": "teste",\n      "createdAt": "2024-06-06T17:48:55.107",\n      "views": 0\n    },\n    {\n      "id": 9,\n      "title": "\uc54c\ub9bc",\n      "content": "\uc54c\ub9bc",\n      "userId": 2,\n      "username": "teste2",\n      "createdAt": "2024-06-28T18:19:30.56",\n      "views": 0\n    }\n  ]\n}\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\uc694\uccad \ud588\uc744\ub54c \ub098\uc628 \uacb0\uacfc\uc5d0\uc11c \uac8c\uc2dc\uae00\uc740 \uc5ec\ub7ec\uac1c\uc778\ub370 \uc791\uc131\uc790 id\ub97c \ubcf4\uba74 ",(0,r.jsx)(n.code,{children:"{userId:1,userId:2}"})," \uc774\ub807\uac8c \ub450\uba85\uc758 \uc791\uc131\uc790\ub9cc \uc788\ub2e4\ub294 \uac83\uc744 \uc8fc\ubaa9\ud574\uc57c \ud55c\ub2e4. (\uc694\uccad\uc2dc page \uc815\ubcf4\ub3c4 \ub098\uc624\ub294\ub370 \uadf8\uac74 \ube90\uc74c)"]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uac8c\uc2dc\uae00\uc744 \uc804\uccb4 \uc870\ud68c\ud560\ub54c \ucd1d 7\uac1c\uc758 \uac8c\uc2dc\uae00\uc744 \uac00\uc838\uc628\ub2e4 (\ud398\uc774\uc9d5\uc73c\ub85c \ud55c \ud398\uc774\uc9c0 \ub2f9 10\uac1c \uc529\uc758 \uac8c\uc2dc\uae00\ub9cc \uac00\uc838\uc624\uac8c \uc124\uc815)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uc720\uc800 \uc815\ubcf4\ub97c n\ubc88 \uac16\uace0\uc628\ub2e4."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"1\ud398\uc774\uc9c0\ub97c \uac00\uc838\uc62c\ub54c 10\uba85\uc758 \uac01\uc790 \ub2e4\ub978 \uc720\uc800\uac00 \uc4f4 \uae00\uc774\uba74 \ucffc\ub9ac\ub294 11\ubc88 \uc2e4\ud589\ub41c\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ud574\uacb0\ubc95",children:"\ud574\uacb0\ubc95"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uc77c\ub2e8 \ub098\uc758 \ucf54\ub4dc\ub294 \uc5d4\ud2f0\ud2f0\uac04\uc758 \uc758\uc874\ub3c4\ub97c \ub0ae\ucd94\ub824\uace0 \uc791\uc131\ud574\uc11c \uc5f0\uad00\uad00\uacc4\uac00 \ub9f5\ud551\ub418\uc5b4\uc788\uc9c0\uac00 \uc54a\ub2e4."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uadf8\ub798\uc11c fetch join\uc740 \uc0ac\uc6a9\ubd88\uac00"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\ud300 \ud504\ub85c\uc81d\ud2b8\ub54c \uc0ac\uc6a9\ud588\ub358 Batch\uae30\ubc95\uc774 \uc0dd\uac01\ub0ac\ub2e4."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uc801\uc6a9\ud574\ubcf4\uc790"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'    public Page<PostResponse> getPosts(Long boardId, int page, int size) {\n        Pageable pageable = PageRequest.of(page, size);\n        Page<Post> posts = postRepository.findByBoardId(boardId, pageable);\n        //\ubaa8\ub4e0 \ud3ec\uc2a4\ud2b8\uc758 userId \uac00\uc838\uc624\uae30\n        Set<Long> userIds = new HashSet<>();\n        for(Post post : posts.getContent()){\n            userIds.add(post.getUserId());\n        }\n        //\ud55c\ubc88\uc5d0 \ubaa8\ub450 \uc870\ud68c\n        List<User> users = userRepository.findAllById(userIds);\n        Map<Long, String> userMap = new HashMap<>();\n        for (User user : users) {\n            userMap.put(user.getId(), user.getUsername());\n        }\n\n        //posts\uc5d0\uc11c \uac01 post\uc758 userId\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc758 \uc774\ub984\uc744 \ucc3e\uc74c\n        //post\uc758 \ub370\uc774\ud130\uc640 \ucc3e\uc740 \uc0ac\uc6a9\uc790 \uc774\ub984\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc0c8\ub85c\uc6b4 Page<PostRespons>\ub97c \uc0dd\uc131\n        return posts.map(post -> {\n            String username = userMap.getOrDefault(post.getUserId(), "\uc720\uc800 \uc5c6\uc74c");\n            return new PostResponse(post.getId(), post.getTitle(), post.getContent(),\n                post.getUserId(), username, post.getCreatedAt(), post.getViews());\n        });\n    }\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\uac1c\uc120-\uc804\uacfc-\ud6c4-\ucc28\uc774\uc810",children:"\uac1c\uc120 \uc804\uacfc \ud6c4 \ucc28\uc774\uc810"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\ub370\uc774\ud130 \uc870\ud68c \ubc29\uc2dd:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uac1c\uc120 \uc804: \uac01 \uac8c\uc2dc\uae00\ub9c8\ub2e4 \uac1c\ubcc4\uc801\uc73c\ub85c \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uc870\ud68c (N+1 \ubb38\uc81c \ubc1c\uc0dd)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uac1c\uc120 \ud6c4: \ubaa8\ub4e0 \uad00\ub828 \uc0ac\uc6a9\uc790\uc758 ID\ub97c \ubaa8\uc544 \ud55c \ubc88\uc5d0 \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uc870\ud68c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\ucffc\ub9ac \uc2e4\ud589 \ud69f\uc218:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uac1c\uc120 \uc804: \uac8c\uc2dc\uae00 \uc870\ud68c 1\ubc88 + \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c N\ubc88 (N\uc740 \uac8c\uc2dc\uae00 \uc218)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uac1c\uc120 \ud6c4: \uac8c\uc2dc\uae00 \uc870\ud68c 1\ubc88 + \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc77c\uad04 \uc870\ud68c 1\ubc88"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uc131\ub2a5 \uc601\ud5a5:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\uac8c\uc2dc\uae00 \uc218\uac00 \uc99d\uac00\ud574\ub3c4 \ud56d\uc0c1 2\ubc88\uc758 \ucffc\ub9ac\ub9cc \uc2e4\ud589\ub418\uc5b4 \uc131\ub2a5\uc774 \uc77c\uc815\ud558\uac8c \uc720\uc9c0\ub428"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\ud2b9\ud788 \ub300\ub7c9\uc758 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud560 \ub54c \uc131\ub2a5 \ud5a5\uc0c1\uc774 \ub450\ub4dc\ub7ec\uc9d0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\ud655\uc7a5\uc131:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc0ac\uc6a9\uc790 \uc218\uac00 \uc99d\uac00\ud574\ub3c4 \ucd94\uac00\uc801\uc778 \ucffc\ub9ac \uc2e4\ud589 \uc5c6\uc774 \ud6a8\uc728\uc801\uc73c\ub85c \ucc98\ub9ac \uac00\ub2a5"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\uac1c\uc120\ub41c-\ucffc\ub9ac\ubb38",children:"\uac1c\uc120\ub41c \ucffc\ub9ac\ubb38"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Hibernate: \n    /* select\n        generatedAlias0 \n    from\n        Post as generatedAlias0 \n    where\n        generatedAlias0.boardId=:param0 */ select\n            post0_.id as id1_3_,\n            post0_.created_at as created_2_3_,\n            post0_.updated_at as updated_3_3_,\n            post0_.board_id as board_id4_3_,\n            post0_.content as content5_3_,\n            post0_.title as title6_3_,\n            post0_.user_id as user_id7_3_,\n            post0_.views as views8_3_ \n        from\n            post post0_ \n        where\n            post0_.board_id=? limit ?\nHibernate: \n    /* select\n        generatedAlias0 \n    from\n        User as generatedAlias0 \n    where\n        generatedAlias0.id in (\n            :param0\n        ) */ select\n            user0_.id as id1_4_,\n            user0_.email as email2_4_,\n            user0_.password as password3_4_,\n            user0_.username as username4_4_ \n        from\n            user user0_ \n        where\n            user0_.id in (\n                ? , ?\n            )\n"})}),"\n",(0,r.jsx)(n.p,{children:"good~"})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);